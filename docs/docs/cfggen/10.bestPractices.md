---
layout: page
title: æœ€ä½³å®è·µ
parent: é…è¡¨ç³»ç»Ÿ
nav_order: 10
---

# ğŸ’¡ æœ€ä½³å®è·µ
{: .no_toc }

## Table of contents
{: .no_toc .text-delta }

- TOC
{:toc}
---

## ğŸ§© å‡å°‘æ‹†è¡¨

åŸæ¥å¦‚æœè¦æ¨¡å—åŒ–æ¦‚å¿µï¼Œå¯èƒ½è¦æŠŠå®ƒæ”¾åˆ°å•ç‹¬çš„ä¸€ä¸ªé…è¡¨ä¸­ï¼Œå…¶ä»–è¡¨è¦å¼•ç”¨è¿™ä¸ªå°±é€šè¿‡ä¸€ä¸ªidï¼Œè¿™æ ·é…ç½®ä¸€ä¸ªåŠŸèƒ½æ—¶éœ€è¦ç‰µæ¶‰åˆ°å¤šä¸ªè¡¨æ ¼æ–‡ä»¶ï¼Œ
ç°åœ¨åˆ™å¯ä»¥å®šä¹‰è¿™ä¸ªæ¦‚å¿µä¸ºç»“æ„ï¼Œåœ¨è¿™ä¸ªåŠŸèƒ½è¡¨æ ¼ä¸­ç›´æ¥é…ç½®è¿™ä¸ªç»“æ„ã€‚

é€šè¿‡[è¡¨åˆ—æ•°å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ](#column_reduce)ä¸€èŠ‚çš„å¤„ç†æ–¹æ³•ï¼Œå‡å°‘æ‹†è¡¨ï¼ŒæŠŠéœ€è¦é…ç½®çš„å†…å®¹ç´§å¯†æ”¾åœ¨ä¸€èµ·ã€‚


## ğŸ“Š è¡¨è¡Œæ•°å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ

æ¯”å¦‚itemè¡¨ï¼Œå¤ªå¤šè¡Œï¼Œé‚£å¯ä»¥åˆ†å¼€item.csvï¼Œitem_1.csvï¼Œitem_2.csv......å¦‚æœæ˜¯excelå¯ä»¥æ˜¯åˆ†æˆå¤šä¸ªsheetï¼Œitemï¼Œitem_1ï¼Œitem_2......

é€»è¾‘ä¸Šè®¤ä¸ºå°±è¿˜æ˜¯ä¸€ä¸ªitemè¡¨

ç­–åˆ’è§„åˆ’æ‹†è¡¨è§„åˆ™æ—¶ï¼Œæ—¢å¯ä»¥æŒ‰ç…§æ¯”å¦‚ç‰©å“ç±»å‹æ¥æ‹†è¡¨ï¼Œæ‰€æœ‰è£…å¤‡æ”¾åˆ°item_1ï¼Œå®çŸ³æ”¾åˆ°item_2é‡Œï¼›ä¹Ÿå¯ä»¥æŒ‰ç…§idåˆ†æ®µæ¥æ‹†ã€‚

## ğŸ“ˆ è¡¨åˆ—æ•°å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ

### ğŸ¯ å¯¹ç®€å•çš„ç»“æ„ï¼Œé…ç½®packæˆ–sep

è¡¨æ˜è¿™ä¸ªç»“æ„åªå ä¸€æ ¼ï¼Œç”¨packçš„è¯ç”¨é€—å·åˆ†éš”ï¼Œç”¨sepåˆ™å¯ä»¥ç”¨è‡ªå®šä¹‰çš„ç¬¦å·åˆ†å‰²ã€‚
å¦‚ä¸‹ï¼ŒPositioné»˜è®¤æ˜¯å 3åˆ—ï¼Œå£°æ˜sepåï¼Œå 1åˆ—

```
struct Position (sep=';') {
    x:int;
    y:int;
    z:int;
}
```

### ğŸ“‹ å¯¹ç®€å•çš„åˆ—è¡¨ï¼Œé…ç½®sepæˆ–packæˆ–block

æ¯”å¦‚list\<int\>, list\<float\>, list\<str\>ï¼›ä¹Ÿæ”¯æŒmap\<int, int>å¯ä»¥é…ç½®packï¼Œblock


å¦‚ä¸‹ï¼šé¥°å“å¥—è£…çš„éƒ¨ä»¶subListæœ€å¤šåªæœ‰4ä¸ªï¼Œåˆ™ç”¨fix=4æ˜¯å¾ˆåˆé€‚çš„ï¼Œåªå 4åˆ—ã€‚

```
table jewelrysuit[SuitID] (entry='Ename') {
    SuitID:int; // é¥°å“å¥—è£…ID
    Ename:str;
    Name:text; // ç­–åˆ’ç”¨åå­—
    SuitList:list<int> (fix=4); // å­éƒ¨ä»¶åˆ—è¡¨
}
```

å¦‚æœè¿™ä¸ªéƒ¨ä»¶å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½å°äº4ï¼Œä½†å°‘æ•°æƒ…å†µä¼šæœ‰12ä¸ªã€‚

- å¦‚æœé…fix=12 å¦‚ä¸‹ï¼Œåˆ™å›ºå®šå 12åˆ—ï¼Œå¯èƒ½å¤ªå¤šäº†ã€‚
```
table jewelrysuit[SuitID] (entry='Ename') {
    ...
    SuitList:list<int> (fix=12);
}
```

- å¯ä»¥é…ç½®sepæˆ–packï¼Œè®©å®ƒéƒ½åªå ä¸€åˆ—ã€‚
```
table jewelrysuit[SuitID] (entry='Ename') {
    ...
    SuitList:list<int> (pack);
}
```

```
table jewelrysuit[SuitID] (entry='Ename') {
    ...
    SuitList:list<int> (sep=';');
}
```

- ä¹Ÿå¯ä»¥é…ç½®block=4ï¼Œå 4åˆ—ï¼›ä¸€ä¸ªè®°å½•å¤§å¤šæ•°å ä¸€è¡Œï¼Œå°‘æ•°æƒ…å†µå 2ï¼Œ3è¡Œã€‚
```
table jewelrysuit[SuitID] (entry='Ename') {
    ...
    SuitList:list<int> (block=4);
}
```
### ğŸ§± å¯¹ç»“æ„åˆ—è¡¨ï¼Œé…ç½®block

æ¯”å¦‚20ä¸ªå¤åˆç»“æ„ï¼Œæ¯ä¸ªå¤åˆç»“æ„éœ€è¦4åˆ—ï¼Œé‚£å°±éœ€è¦20*4=80åˆ—ï¼Œè¿™åº”è¯¥æ˜¯å¯¼è‡´åˆ—æ•°å¤±æ§çš„ç½ªé­ç¥¸é¦–ã€‚å¤§è‡´æœ‰3ç§è§£æ³•ï¼Œå…ˆæ¨èæœ€ç›´æ¥çš„ï¼Œç”¨block=1

```
struct DropItem {
    chance:int; // æ‰è½æ¦‚ç‡
    itemids:list<int> (block=1); // æ‰è½ç‰©å“
    countmin:int; // æ•°é‡ä¸‹é™
    countmax:int; // æ•°é‡ä¸Šé™
}

table drop[dropid] {
    dropid:int; // åºå·
    name:text; // åå­—
    items:list<DropItem> (block=1); // æ‰è½æ¦‚ç‡
}
```
å¦‚ä¸ŠDropItemå 4åˆ—ï¼Œdropè¡¨é‡Œçš„itemsé…ç½®äº†block=1ï¼Œè¡¨æ˜å®ƒä¹Ÿå ç”¨4åˆ—ï¼Œä½†è¿™ä¸ªlisté€šè¿‡å ç”¨å¤šè¡Œå¯ä»¥æœ‰ä»»æ„å¤šä¸ªï¼Œå¦‚ä¸‹ï¼š

| åºå·     | åå­—         | æ‰è½æ¦‚ç‡         | æ‰è½ç‰©å“åˆ—è¡¨ï¼Œè¿™ä¸ªç”¨åˆ—è¡¨æ˜¯ä¸ºäº†æµ‹è¯•blockåµŒå¥—block | æ•°é‡ä¸‹é™     | æ•°é‡ä¸Šçº¿     |
|--------|------------|--------------|-------------------------------|----------|----------|
| dropid | name       | items,chance | itemids                       | countmin | countmax |
| 1      | æµ‹è¯•æ‰è½       | 100          | 1001                          | 10       | 20       |
|        |            |              | 1002                          |          |          |
|        |            |              | 1003                          |          |          |
|        |            | 10           | 2001                          | 10       | 10       |
|        |            | 10           | 2002                          | 0        | 1        |
|        |            | 50           | 3001                          | 1        | 1        |
| 2      | å‰§æƒ…ä»»åŠ¡æµ‹è¯•2    | 100          | 10001                         | 1        | 1        |
| 3      | é€šå‘Šæ æ‰è½æŸ“è‰²æ¨¡æ¿1 | 80           | 20001                         | 10       | 20       |

è¿™ä¸ªè¡¨ä¹Ÿæ¼”ç¤ºäº†ï¼Œblocké‡Œå¯ä»¥åµŒå¥—block

### ğŸ”— å¯¹ç»“æ„åˆ—è¡¨ï¼Œç”¨ä¸¤ä¸ªè¡¨ï¼Œä½¿ç”¨=>

```
table dropItem[dropItemId] {
    dropItemId:int;
    dropid:int ->drop;
    chance:int; // æ‰è½æ¦‚ç‡
    itemids:list<int> (block=1); // æ‰è½ç‰©å“
    countmin:int; // æ•°é‡ä¸‹é™
    countmax:int; // æ•°é‡ä¸Šé™
}

table drop[dropid] {
    dropid:int =>dropItem[dropid];
    name:text; 
}
```

* dropItemæ˜¯å¦ä¸€ä¸ªè¡¨ï¼Œé‡Œé¢åŒ…å«äº†dropidæ¥ç´¢å¼•->åˆ°dropã€‚
* dropè¡¨ä¸­dropid é€šè¿‡=>(ä¸æ˜¯->)ç´¢å¼•åˆ°dropItemçš„dropidåˆ—ï¼Œç¨‹åºä»£ç ä¼šç”Ÿæˆlist\<DropItem>ã€‚
* è¿™é‡Œçš„ä¼šäº§ç”Ÿé¢å¤–çš„dropItemIdï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸éœ€è¦çš„ï¼Œæ‰€ä»¥æ¨è3é‡Œçš„blockåšæ³•ã€‚

### ğŸ”— å¯¹ç»“æ„åˆ—è¡¨ï¼Œç”¨ä¸¤ä¸ªè¡¨ï¼Œä½¿ç”¨list\<int>

```
table dropItem[dropItemId] {
    dropItemId:int;
    chance:int; // æ‰è½æ¦‚ç‡
    itemids:list<int> (block=1); // æ‰è½ç‰©å“
    countmin:int; // æ•°é‡ä¸‹é™
    countmax:int; // æ•°é‡ä¸Šé™
}

table drop[dropid] {
    dropid:int;
    name:text; // åå­—
    items:list<int> ->dropItem (pack); // æ‰è½æ¦‚ç‡
}
```
* è·Ÿ4ä¸€æ ·å¼•å…¥äº†dropItemIdï¼Œä½†è¿™é‡Œdropå¯¹dropItemåˆ—è¡¨çš„ç´¢å¼•ç›´è§‚çš„é€šè¿‡list\<int>æ¥å–å¾—ã€‚
* å¥½å¤„ï¼šä¸€è¡ŒdropItemå¯ä»¥è¢«å¤šä¸ªdropå…¬ç”¨

### ğŸ”„ å¯¹è¡Œå°‘åˆ—å¤šï¼Œç”¨åˆ—æ¨¡å¼

å‚è€ƒ[æ¨¡å—å‚æ•°è¡¨ä¾‹å­]

## ğŸ“ å•å…ƒæ ¼

### ğŸš« å¯ç©ºçš„å•å…ƒæ ¼

æ¯”å¦‚dialogè¡¨ï¼Œå¯ä»¥é…ç½®ä¸€ä¸ªnpcidï¼Œå¦‚æœé…ç½®äº†npcidï¼Œåˆ™æœå‘ä»–ï¼Œå¦‚æœæ²¡é…çš„è¯å°±ä¸è½¬å‘

åˆ™å¦‚æœä¸é…ç½®npcï¼Œå°±æŠŠnpcidå¯¹åº”çš„å•å…ƒæ ¼ç•™ç©ºï¼Œä¸è¦å¡«0ï¼Œ-1

> excelæˆ–csvå•å…ƒæ ¼ä¸­ä¸å¡«çš„è¯é»˜è®¤ä¸ºfalse,0,""ï¼Œæ‰€ä»¥ä¸è¦ç”¨0ä½œä¸ºä¸€è¡Œçš„idã€‚
>
> å¦‚æœæœ‰nullableRefè¯·ä¸è¦å¡«0ï¼Œè¯·ç”¨ç•™ç©ºã€‚å¦åˆ™ç¨‹åºä¼šæ£€æµ‹æŠ¥é”™.



### ğŸ—ï¸ å¤æ‚ç»“æ„çš„å•å…ƒæ ¼

æ¯”å¦‚ä»£å¸å¥–åŠ±ï¼Œæœ‰ä¸¤ä¸ªå­—æ®µï¼Œä¸€ä¸ªæ˜¯ä»£å¸ç±»å‹ï¼Œä¸€ä¸ªæ˜¯æ•°é‡ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå•å…ƒæ ¼é‡Œé…ç½®ï¼Œæ¯”å¦‚

```
struct LevelRank {
	Level:int; // ç­‰çº§
	Rank:int ->equip.rank; // å“è´¨
}
```

```
table xx ...{
    ...
    reward:Reward (pack);
}
```

| reward |
|--------|
| 1,100  |

ç”šè‡³å¯ä»¥åœ¨ä¸€ä¸ªå•å…ƒæ ¼é‡Œé…ç½®ä»£å¸å¥–åŠ±åˆ—è¡¨

```
table xx ...{
    ...
    rewardList:list<Reward> (pack);
}
```

| rewardList     |
|:---------------|
| (1,100),(2,50) |

è¿˜æ”¯æŒå¤šæ€çš„ç±»å‹ï¼Œæ¯”å¦‚taskè¡¨ï¼Œåˆ™å¯ä»¥å®šä¹‰æ¥å£å¦‚ä¸‹ï¼š

``` 
interface completecondition (enumRef='completeconditiontype') {
	struct KillMonster {
		monsterid:int ->other.monster;
		count:int;
	}

	struct TalkNpc {
		npcid:int;
	}

	struct CondAnd {
		cond1:task.completecondition (pack);
		cond2:task.completecondition (pack);
	}

	struct CollectItem {
		itemid:int;
		count:int;
	}
}
```

ä»»åŠ¡è¡¨ä¸ºï¼š

```
table task...{
    ...
    condition: completecondition(pack);
}
```

| Condition                               |
|:----------------------------------------|
| KillMonster(1001, 1)                    |
| CondAnd(TalkNpc(5),KillMonster(101, 3)) |

ä»¥ä¸Špackç»“æ„é‡Œçš„,ä¹Ÿå¯ä»¥ç”¨;æ¥åˆ†å‰²ã€‚ä¹Ÿå¯ä»¥æ··ç”¨,;

## ğŸ’¼ ä½¿ç”¨ä¸¾ä¾‹

### ğŸ ç‰©å“è¡¨

æ¯”å¦‚ç‰©å“è¡¨itemï¼Œç‰©å“åŒ…å«è£…å¤‡ï¼Œå®çŸ³ï¼Œè´§å¸ç­‰åˆ†ç±»ï¼Œæ¯ä¸ªåˆ†ç±»ä¸‹å¯èƒ½æœ‰ç‹¬ç‰¹çš„å±æ€§ï¼Œæ€ä¹ˆé…ç½®èˆ’æœå‘¢ï¼Ÿ

itemè¡¨ï¼Œæœ‰typeå­—æ®µæŒ‡å‘itemtypeè¡¨ï¼Œitemtypeè¡¨é‡Œé…ç½®ä¸Šè£…å¤‡ï¼Œå®çŸ³ï¼Œè´§å¸ç­‰åˆ†ç±»ï¼›itemè¡¨ç”¨äºé…ç½®æ‰€æœ‰åˆ†ç±»å…±æœ‰çš„å±æ€§ï¼Œæ¯”å¦‚åç§°ï¼Œå…è®¸å †å ä¸Šé™ç­‰ï¼Œ

è£…å¤‡equipï¼Œè·Ÿå®çŸ³gemå¯èƒ½æœ‰å„è‡ªç‹¬ç‰¹çš„å±æ€§ï¼Œé‚£å†åŠ ä¸Šitemequipè¡¨ï¼Œitemgemè¡¨ã€‚
è¿™ä¸¤ä¸ªè¡¨å†…çš„idè·Ÿitemè¡¨ç›¸åŒï¼Œé…ç½®å®ƒç´¢å¼•åˆ°itemè¡¨ï¼Œç„¶åå…¶ä»–åˆ—åŠ ä¸Šequipï¼Œgemç‰¹æœ‰çš„å±æ€§å°±è¡Œã€‚

åªé…ç½®ä¸€ä¸ªitemè¡¨ï¼Œitemè¡¨å®šä¹‰å‰é¢æ˜¯å…±æœ‰å­—æ®µï¼Œåé¢æœ‰ä¸ªextraå­—æ®µæ˜¯å¤šæ€ç±»å‹ï¼Œå¯ä»¥æ˜¯è£…å¤‡ï¼Œå®çŸ³ï¼Œè´§å¸ï¼Œå„åŒ…å«è‡ªå·±ç‹¬æœ‰çš„å±æ€§ã€‚

ç„¶åå†åˆ©ç”¨æˆ‘ä»¬å·²æœ‰åˆ†æ‹†æ–‡ä»¶åŠŸèƒ½ï¼Œå¯ä»¥è£…å¤‡éƒ½æ”¾å…¥item_1ï¼Œå®çŸ³éƒ½æ”¾å…¥item_2


* ç¬¬ä¸€ç§åšæ³•ä¸å¥½å¾—åœ°æ–¹åœ¨äºï¼šä¸€ä¸ªè£…å¤‡idï¼Œè¦é…ç½®åœ¨ä¸¤å¤„ï¼Œä¸€ä¸ªitemè¡¨ï¼Œä¸€ä¸ªitemequipè¡¨ã€‚æœ‰é‡å¤ã€‚
* ç¬¬ä¸€ç§åšæ³•å¥½å¤„æ˜¯å…¶ä»–è¡¨å¯ä»¥å£°æ˜ï¼ˆrefï¼‰è‡ªå·±å­—æ®µæ˜¯ä¸ªitemequipï¼Œå¦‚æœç”¨ç¬¬äºŒç§æ–¹æ¡ˆï¼Œåˆ™åªèƒ½å£°æ˜å­—æ®µæ˜¯itemã€‚ç¬¬äºŒç§ç¨‹åºä¹Ÿä¼šè¦å¤šåšä¸€äº›åˆ¤æ–­ï¼Œ
  æˆ‘æœŸæœ›çš„æ˜¯itemequipï¼Œä½†æˆ‘æ‹¿åˆ°çš„ç±»å‹æ˜¯itemï¼Œé‚£item.extraæ˜¯ä¸æ˜¯equipæˆ‘éœ€è¦åˆ¤æ–­å•Šï¼Œä¸æ˜¯æ€ä¹ˆå¤„ç†ã€‚ä¸å¥½å†™ã€‚

### âš™ï¸ æ¨¡å—å‚æ•°è¡¨

ä¸€ä¸ªæ¨¡å—ä¸€èˆ¬ä¼šæœ‰é€šç”¨å‚æ•°éœ€è¦é…ç½®ï¼Œé‚£æ€ä¹ˆé…ç½®èˆ’æœå‘¢ï¼Ÿ

- å¯ä»¥é…ç½®ä¸€è¡Œï¼Œç”¨entryæ¥å¼•ç”¨è¿™æ•´è¡Œã€‚

- ä½†è¿™æ ·å¯èƒ½åˆ—æ•°å¤ªå¤šï¼Œçœ‹ç€ä¸èˆ’æœï¼Œæˆ‘ä»¬è¿˜æœ‰åˆ—æ¨¡å¼æœºåˆ¶ï¼Œåœ¨è¿™ä¸ªè¡¨ä¸Šé…ç½®columnModeï¼Œé‚£å¯ä»¥æŠŠè¡¨åè½¬90åº¦ï¼Œå¾ˆå¤šåˆ—ï¼Œå˜æˆå¾ˆå¤šè¡Œï¼Œé…ç½®èµ·æ¥èˆ’æœå¤šäº†

```
table equipconfig[entry] (entry='entry', columnMode) {
	entry:str; // å…¥å£ï¼Œç¨‹åºå¡«
	stone_count_for_set:int; // å½¢æˆå¥—è£…çš„éŸ³çŸ³æ•°é‡
	draw_protect_name:str; // ä¿åº•ç­–ç•¥åç§°
	broadcastid:int; // å…¬å‘ŠId
	broadcast_least_quality:int; // å…¬å‘Šçš„æœ€ä½å“è´¨
	week_reward_mailid:int; // æŠ½å¡å‘¨å¥–åŠ±çš„é‚®ä»¶id
}
```

excelè¡¨ä¸ºï¼š

| å…¥å£ï¼Œç¨‹åºå¡«     | entry                   | Instance |
|------------|-------------------------|----------|
| å½¢æˆå¥—è£…çš„éŸ³çŸ³æ•°é‡  | stone_count_for_set     | 2        |
| ä¿åº•ç­–ç•¥åç§°     | draw_protect_name       | æµ‹è¯•       |
| å…¬å‘ŠId       | broadcastid             | 9500     |
| å…¬å‘Šçš„æœ€ä½å“è´¨    | broadcast_least_quality | 1003     |
| æŠ½å¡å‘¨å¥–åŠ±çš„é‚®ä»¶id | week_reward_mailid      | 100      |


### ğŸ¯ æ‰è½è¡¨

è§[å¯¹ç»“æ„åˆ—è¡¨å¦‚ä½•å‡å°‘åˆ—æ•°](#column_reduce_struct_list)ä¸€èŠ‚çš„è®¨è®º
