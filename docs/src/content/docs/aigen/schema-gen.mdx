---
title: Schema ç”Ÿæˆ
description: ä½¿ç”¨è‡ªç„¶è¯­è¨€ç”Ÿæˆ CFG Schema å®šä¹‰æ–‡ä»¶
sidebar:
  order: 5
---

Schema ç”Ÿæˆæ’ä»¶å…è®¸æ‚¨ä½¿ç”¨è‡ªç„¶è¯­è¨€æè¿°è‡ªåŠ¨ç”Ÿæˆç¬¦åˆ cfggen è§„èŒƒçš„ `.cfg` ç»“æ„å®šä¹‰æ–‡ä»¶ã€‚é€šè¿‡é›†æˆ Claude Codeï¼Œå¯ä»¥å°†è®¾è®¡éœ€æ±‚å¿«é€Ÿè½¬æ¢ä¸ºå¯æ‰§è¡Œçš„ schema æ–‡ä»¶ã€‚

## åŠŸèƒ½ç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| ğŸ¯ **è‡ªç„¶è¯­è¨€è¾“å…¥** | ç”¨ä¸­æ–‡æè¿°é…ç½®éœ€æ±‚ï¼Œè‡ªåŠ¨ç”Ÿæˆ CFG schema |
| ğŸ—ï¸ **å®Œæ•´è¯­æ³•æ”¯æŒ** | æ”¯æŒ structã€interfaceã€tableã€å¤–é”®ã€å…ƒæ•°æ®ç­‰ |
| ğŸ”— **æ™ºèƒ½å…³è”** | è‡ªåŠ¨è¯†åˆ«å¹¶ç”Ÿæˆå¤–é”®å…³è”å…³ç³»ï¼ˆ`->` å•å‘ã€`=>` å¤šå‘ï¼‰ |
| ğŸ“ **ä»£ç æ³¨é‡Š** | è‡ªåŠ¨æ·»åŠ æ¸…æ™°çš„ä¸­æ–‡æ³¨é‡Š |
| âœ¨ **å¤šæ€æ”¯æŒ** | æ™ºèƒ½è¯†åˆ«éœ€è¦ interface çš„å¤šæ€åœºæ™¯ |

## å®‰è£…æ’ä»¶

å°† `cfgdev/schema-gen-plugin/gen-schema.md` æ–‡ä»¶å¤åˆ¶åˆ°é¡¹ç›®çš„ `.claude/commands/` ç›®å½•ï¼š

```bash
cp cfgdev/schema-gen-plugin/gen-schema.md .claude/commands/
```

## ä½¿ç”¨æ–¹å¼

### å‘½ä»¤æ ¼å¼

```bash
/gen-schema <é…ç½®éœ€æ±‚æè¿°>
```

### ç¤ºä¾‹ 1ï¼šç®€å•æ•°æ®è¡¨

**è¾“å…¥**:
```bash
/gen-schema åˆ›å»ºä¸€ä¸ªç‰©å“è¡¨ï¼ŒåŒ…å«idã€åç§°ã€ç±»å‹ã€ä»·æ ¼ã€æè¿°
```

**ç”Ÿæˆ** `item.cfg`:
```cfg
// ç‰©å“é…ç½®è¡¨
table item[id] {
    id:int;           // ç‰©å“ID
    name:str;         // ç‰©å“åç§°
    type:str;         // ç‰©å“ç±»å‹
    price:int;        // ç‰©å“ä»·æ ¼
    description:text; // ç‰©å“æè¿°
}
```

### ç¤ºä¾‹ 2ï¼šå¤æ‚ç³»ç»Ÿ

**è¾“å…¥**:
```bash
/gen-schema åˆ›å»ºä¸€ä¸ªä»»åŠ¡ç³»ç»Ÿï¼š
1. ä»»åŠ¡è¡¨åŒ…å«ä»»åŠ¡idã€åç§°ã€æè¿°ã€å®Œæˆæ¡ä»¶ï¼ˆæ¥å£ï¼‰ã€å¥–åŠ±åˆ—è¡¨
2. å®Œæˆæ¡ä»¶æ¥å£æ”¯æŒï¼šå‡»æ€æ€ªç‰©ã€æ”¶é›†ç‰©å“ã€ä¸NPCå¯¹è¯
3. å¥–åŠ±åŒ…å«ç»éªŒå’Œç‰©å“åˆ—è¡¨
```

**ç”Ÿæˆ** `task.cfg`:
```cfg
// ä»»åŠ¡å®Œæˆæ¡ä»¶æ¥å£
interface TaskCondition {
    // å‡»æ€æ€ªç‰©æ¡ä»¶
    struct KillMonster {
        monsterid:int ->monster.id; // æ€ªç‰©ID
        count:int;                  // å‡»æ€æ•°é‡
    }

    // æ”¶é›†ç‰©å“æ¡ä»¶
    struct CollectItem {
        itemid:int ->item.id; // ç‰©å“ID
        count:int;            // æ”¶é›†æ•°é‡
    }
}

// ä»»åŠ¡é…ç½®è¡¨
table task[id] {
    id:int;               // ä»»åŠ¡ID
    name:str;            // ä»»åŠ¡åç§°
    description:text;    // ä»»åŠ¡æè¿°
    condition:TaskCondition; // å®Œæˆæ¡ä»¶
}
```

### ç¤ºä¾‹ 3ï¼šå¸¦å…³è”çš„é…ç½®

**è¾“å…¥**:
```bash
/gen-schema åˆ›å»ºå•†åº—ç³»ç»Ÿï¼ŒåŒ…å«å•†åº—è¡¨å’Œå•†å“è¡¨ï¼Œå•†å“å¼•ç”¨ç‰©å“é…ç½®
```

**ç”Ÿæˆ** `shop.cfg`:
```cfg
// å•†åº—é…ç½®è¡¨
table shop[id] {
    id:int;       // å•†åº—ID
    name:str;     // å•†åº—åç§°
}

// å•†å“é…ç½®è¡¨
table shopitem[id] {
    id:int;           // å•†å“ID
    shopid:int ->shop.id; // æ‰€å±å•†åº—
    itemid:int ->item.id; // ç‰©å“ID
    price:int;        // ä»·æ ¼
}
```
